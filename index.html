<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Memory Encryption Design Quiz</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
        <link rel="stylesheet" href="./css/main.css">
        <link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">        
    </head>
    <body onload="init();" class="vscode-body vscode-light">
        <h1 id="merkle-tree-quiz">Memory Encryption Design Quiz</h1>

        <div class="question_group" id="q1">
            <div class="question">
                <h2 id="question-1">Question 1 - Direct Encryption</h2>
                <p>Suppose that we have a hypothetical machine with the following characteristics</p>
                <ul>
                    <li>Suppose that initially, blocks A and B are cached, but C and D are not. Blocks A and B are dirty and recently written with values 0111 and 0000, respectively.</li>
                    <li>The memory can hold four data blocks: A, B, C, and D. Their block addresses are 00, 01, 10, and 11, respectively.</li>
                    <li>We employ a block encryption function that produces the following 4-bit encrypted value given some 4-bit input (shown in the table below)</li>
                </ul>
                <div id="q1_table_container">
                </div> 
                <p>Suppose that initially, blocks A and B are cached, but C and D are not. Blocks A and B are dirty and recently written with values of <span id="q1_block_a"></span> and <span id="q1_block_b"></span>, respectively.</p>
                <p>Assuming a direct encryption scheme (i.e. electronic codebook mode) the encryption of block A is <code>___</code>. The encryption of block B is <code>___</code>.</p>
            </div>
            <div class="answer" id="q1_answer">
                <h2 id="question-1-answers">Question 1 answers</h3>
                <p>Block A: <code id="q1_block_a_ans"></code></p>
                <p>Block B: <code id="q1_block_b_ans"></code></p>                
            </div>            
        </div>


        <div class="question_group" id="q2">
            <div class="question">
                <h2 id="question-2">Question 2 - Counter Mode Encryption</h2>
                <p>Assume a counter-mode encryption using a 4-bit global counter.  The counter value is currently <span id="q2_counter"></span> and the current address of block A is <span id="q2_block_a"></span>.  Assume that a counter is incremented before used for encryption (and not the other way around).                
                <div id="q2_table_container">
                </div>   
                <p>If block A is written back to memory, the encryption seed that is used is what?  What is the pad?  What is the cipher text of Block A that is written to memory?</p>             
            </div>
            <div class="answer" id="q2_answer">
                <h2 id="question_2_answers">Question 2 answers</h3>
                <div>
                    <h4>Seed Calculation</h4>
                    <p>Seed = Address || Counter</p>
                    <p>Seed = <span id="q2_seed_address"></span> || <span id="q2_seed_counter"></span> + 1</p>
                    <p>Seed = <span id="q2_seed"></span></p>           
                </div>
                <div>
                    <h4>Pad Calculation</h4>
                    <p>Pad = E(Seed)</p>
                    <p>Pad = E(<span id="q2_pad_seed"></span>)</p>
                    <p>Pad = <span id="q2_pad"></span></p>
                </div>
                <div>
                    <h4>Cipher Text Calculation</h4>
                    <p>Cipher Text = Address XOR Pad</p>
                    <p>Cipher Text = <span id="q2_cipher_address"></span> XOR <span id="q2_cipher_pad"></span></p>
                    <p>Cipher Text = <span id="q2_cipher"></span></p>
                </div>
            </div>            
        </div>



        <div class="question_group" id="q3">
            <div class="question">
                <h2 id="question-3">Question 3 - Timestamp Encryption</h2>
                <ul>
                    <li>a) Assume a time stamp based memory encryption scheme with a current clock tick on <span id="q3_tick"></span>. What would be the next clock tick? ____</li>
                    <li>b) Continuing from the answer for question a. What would be the clock tick after that? ____.</li>
                    <li>c) How many clock ticks until values will be recycled? ____</li>
                </ul>                
            </div>
            <div class="answer" id="q3_answer">
                <h2 id="question_3_answers">Question 3 answers</h3>
                <ul>
                    <li>a) <span id="q3_a_answer"></span></li>
                    <li>b) <span id="q3_b_answer"></span></li>
                    <li>c) <span id="q3_c_answer"></span></li>
                </ul>
            </div>            
        </div>


        <div class="question_group" id="q4">
            <div class="question">
                <h2 id="question-4">Question 4</h2>
                <ul>
                    <li>a. What is a common vulnerability in hash functions? ___</li>
                    <li>b. What is a solution to that vulnerability that is used in merkle trees? ___</li>
                </ul>                
            </div>
            <div class="answer" id="q4_answer">
                <h2 id="question_4_answers">Question 4 answers</h3>
                <ul>
                    <li>a) <span id="q4_a_answer">Birthday attack</span></li>
                    <li>b) <span id="q4_b_answer">HMAC, Keyed HMAC, etc.</span></li>
                </ul>
            </div>            
        </div>

        <div class="question_group" id="q5">
            <div class="question">
                <h2 id="question-5">Question 5 - Merkle Tree</h2>
                <p>Assume the following Merkle Tree</p>
                <p><img src="./images/merkle.png"></p>
                <p>Also assume that blocks L1, L2, L3 and L4 have initial values of <span id="q5_l1"></span>, <span id="q5_l2"></span>, <span id="q5_l3"></span>, and <span id="q5_l4"></span> respectively. The hash function takes in 4 bits as input and returns 2 bits as output.</p>
                <div id="q5_table_container">

                </div>
                <p>
                    <ul>
                        <li>a. Given the above input and output, what is the value of Hash 0 (i.e., root of L1 and L2)? ____</li>
                        <li>b. Given the above input and output, what is the value of Hash 1 (i.e., root of L3 and L4)? ____</li>
                        <li>c. Given the answers to questions a and b, what is the root value of the merkle tree? ____</li>
                    </ul>
                </p>
            </div>
            <div class="answer" id="q5_answer">
                <h2 id="question_5_answers">Question 5 answers</h3>
                <p>a)</p>
                <ul>
                    <li>H(L1) = E(<span id="q5_a_l1_value"></span>) = <span id="q5_a_l1_hash"></span></li>
                    <li>H(L2) = E(<span id="q5_a_l2_value"></span>) = <span id="q5_a_l2_hash"></span></li>
                    <li>H(L1) || H(L2) = <span id="q5_a_l1_hash_concat"></span> || <span id="q5_a_l2_hash_concat"></span> = <span id="q5_a_l1_l2_concat"></span></li>
                </ul>
                <p>b)</p>
                <ul>
                    <li>H(L3) = E(<span id="q5_a_l3_value"></span>) = <span id="q5_a_l3_hash"></span></li>
                    <li>H(L4) = E(<span id="q5_a_l4_value"></span>) = <span id="q5_a_l4_hash"></span></li>
                    <li>H(L3) || H(L4) = <span id="q5_a_l3_hash_concat"></span> || <span id="q5_a_l4_hash_concat"></span> = <span id="q5_a_l3_l4_concat"></span></li>
                </ul>
                <p>c)</p>
                <ul>
                    <li>Root = H(H(L1) || H(L2)) || H(H(L3) || H(L4))</li>
                    <li>Root = H(<span id="q5_c_l1_hash"></span> || <span id="q5_c_l2_hash"></span>) || H(<span id="q5_c_l3_hash"></span> || <span id="q5_c_l4_hash"></span>)</li>
                    <li>Root = H(<span id="q5_c_l1_l2_concat"></span>) || H(<span id="q5_c_l3_l4_concat"></span>)</li>
                    <li>Root = <span id="q5_c_l1_l2_hash"></span> || <span id="q5_c_l3_l4_hash"></span> = <span id="q5_c_root_value"></span></li>
                </ul>

            </div>            
        </div>

        <div class="question_group" id="q6">
            <div class="question">
                <h2 id="question-6">Question 6</h2>
                <p>Assume a Merkle Tree with a <span id="q6_hash_value"></span>-bit hash and <span id="q6_byte_value"></span>-byte block size.</p>
                <ul>
                    <li>a) The max arity of the merkle tree is ___.</li>
                    <li>b) The ratio of merkle tree to data is ___.</li>
                </ul>                
            </div>
            <div class="answer" id="q6_answer">
                <h2 id="question_6_answers">Question 6 answers</h3>
                <p>a)</p>
                <ul>
                    <li><span id="q6_a_answer_byte_value"></span> byte = <span id="q6_a_answer_byte_to_bit_value"></span> bits.</li>
                    <li><span id="q6_a_answer_byte_to_bit_value2"></span> bits / <span id="q6_a_answer_hash_value"></span> bits = <span id="q6_a_answer"></span></li>
                </ul>
                <p>b)</p>
                <ul>
                    <li>(1 / <i>max_arity</i>) / (1 - (1 / <i>max_arity</i>))</li>
                    <li>(1 / <span id="q6_b_arity_1"></span>) / (1 - (1 / <i><span id="q6_b_arity_2"></span></i>))</li>
                    <li><span id="q6_b_maxRatio"></span></li>
                </ul>              
            </div>            
        </div>

        <div class="question_group" id="q7">
            <div class="question">
                <h2 id="question-7">Question 7</h2>
                <ul>
                    <li>a. What's a potential issue with using vanilla merkle trees to protect your data? ___</li>
                    <li>b. What's a good solution to that problem? ___</li>
                </ul>                
            </div>
            <div class="answer" id="q7_answer">
                <h2 id="question_7_answers">Question 7 answers</h3>
                <ul>
                    <li>a) <span id="q7_a_answer">Most merkle trees are too large</span></li>
                    <li>b) <span id="q7_b_answer">Using a bonsai merkle tree, building a merkle tree over just the counters, and adjacent answers.</span></li>
                </ul>
            </div>            
        </div>

        
        <div class="button-container">
            <button class="left-button" id="prevQuestion" onclick="prevQuestion();">Previous</button>
            <button class="center-button" onclick="showAnswer();">Show Answers</button>
            <button class="center-button" onclick="regenerate();">Regenerate</button>
            <button class="right-button" id="nextQuestion" onclick="nextQuestion();">Next</button>
        </div>


        <script src="./js/functions.js"></script>
    </body>
</html>
